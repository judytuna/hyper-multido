<html>
  <head>
    <title>My Multiple-Stage Todo List</title>
    <script src="hyper://blog.mauve.moe/slides/agregore-blog-workshop/helpers.js" type="module"></script>
    <script>
      function init() {
        document.currentGame = "";

        document.stagePopup = function(e) {
          let el = e.currentTarget;
          console.log(el.className);
          document.currentGame = el;

          let stageSelect = document.getElementById("stageSelect");
          stageSelect.style.left = e.clientX;
          stageSelect.style.top = e.clientY;
          stageSelect.hidden = false;
        }
        document.moveToStage = async function(e, stageName) {
          let stageSelect = document.getElementById("stageSelect");
          stageSelect.hidden = true;
          let el = document.currentGame;
          el.className = "";
          el.classList.add(stageName);
          await save();
        };
      }
      init();
    </script>
    <style>
      .to-play {
        background-color: #ffffff;
      }
      .playing {
        background-color: gold;
      }
      .done {
        background-color: gray;
      }
    </style>
  </head>
  <body>
    <h1>Hello World, this is my multi-stage todo list!</h1>
    <h2>All games</h2>
  <ul>
    <li onclick="document.stagePopup(event)" class="to-play">Super Mario Odyssey</li>
    <li onclick="document.stagePopup(event)">River City Girls 1 &amp; 2</li>
    <li onclick="document.stagePopup(event)">Ooblets</li>
  </ul>

  <div id="stageSelect" hidden="true" style="background-color: orchid; z-index: 1000; color: #ffffff; width: 100px; position: absolute;">
    <p onclick="document.moveToStage(event, 'to-play')">Want to play</p>
    <p onclick="document.moveToStage(event, 'playing')">Playing</p>
    <p onclick="document.moveToStage(event, 'done')">Done</p>
  </div>

  </body></html>